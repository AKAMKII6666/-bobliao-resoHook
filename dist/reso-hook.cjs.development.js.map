{"version":3,"file":"reso-hook.cjs.development.js","sources":["../src/iReso.ts","../src/mobileAdp.js","../src/resoHook.tsx","../src/index.ts"],"sourcesContent":["import { ReactElement } from 'react';\r\n/**\r\n * useReso 钩子返回的东西\r\n */\r\nexport interface Ireso {\r\n  /**\r\n   * 数据\r\n   */\r\n  data: {\r\n    /**\r\n     * 用于服务器端渲染时,进行分辨率预计算的写入元素\r\n     */\r\n    helTags: ReactElement;\r\n    /**\r\n     * 剥离了Helmet的版本\r\n     */\r\n    elemsnts: ReactElement;\r\n    /*\r\n     *脚本纯字符串\r\n     */\r\n    scriptStr: string;\r\n  };\r\n  /**\r\n   * 返回初始化好的mobileAdp对象\r\n   */\r\n  funcs: any;\r\n  /**\r\n   * 屏幕状态\r\n   */\r\n  screenState: EscreenState;\r\n}\r\n\r\n/**\r\n * 设置分辨率适配器的工作模式\r\n */\r\nexport enum EresoMode {\r\n  /**\r\n   * auto:自动选择高度还是宽度来调整\r\n   */\r\n  AUTO = 'auto',\r\n  /**\r\n   * width:只通过宽度调整\r\n   */\r\n  WIDTH = 'width',\r\n  /**\r\n   * height:只通过高度调整\r\n   */\r\n  HEIGHT = 'height',\r\n}\r\n\r\n/**\r\n * 用于分辨率适配器的参数\r\n */\r\nexport interface Iconfig {\r\n  /**\r\n   * 页面字体基准\r\n   */\r\n  fontSize: number;\r\n  /**\r\n   * 设计稿的宽度\r\n   */\r\n  designWidth: number;\r\n  /**\r\n   * 设计稿的高度\r\n   */\r\n  designHeight: number;\r\n  /**\r\n   * 缩放限制参数\r\n   * 用于限制页面的缩放大小\r\n   */\r\n  scaleLimit?: {\r\n    /**\r\n     * 是否打开缩放限制\r\n     */\r\n    enable: boolean;\r\n    /**\r\n     * 最大的宽度限制\r\n     */\r\n    maxWidth?: number;\r\n    /**\r\n     * 最小的宽度限制\r\n     */\r\n    minWidth?: number;\r\n    /**\r\n     * 最大的高度\r\n     */\r\n    maxHeight?: number;\r\n    /**\r\n     * 最小的高度\r\n     */\r\n    minHeight?: number;\r\n  };\r\n  /**\r\n   * 横屏回调函数\r\n   */\r\n  hCallBack?: Function;\r\n  /**\r\n   * 竖屏回调函数\r\n   */\r\n  vCallBack?: Function;\r\n  /**\r\n   * 调整模式\r\n   */\r\n  mode?: EresoMode;\r\n  /**\r\n   * 防抖时间\r\n   */\r\n  debounceTime?: number;\r\n}\r\n\r\n/**\r\n * 用于分辨率适配器的参数\r\n * 多参数适配\r\n */\r\nexport interface IconfigMutiple {\r\n  /**\r\n   * 查询条件\r\n   */\r\n  queryList: Array<Imq>;\r\n}\r\n\r\nexport interface Imq {\r\n  /**\r\n   * 查询当前窗体的宽度例如\r\n   * '(min-width: 1824px)'\r\n   * '(max-width: 1224px)'\r\n   * 符合条件的就使用config来进行适配\r\n   */\r\n  mediaQuery: {\r\n    /**\r\n     * 查询条件\r\n     */\r\n    screenState: EscreenState;\r\n    /**\r\n     * 范围控制\r\n     */\r\n    scope?: queryItem;\r\n    /**\r\n     * 适配参数\r\n     */\r\n    config: Iconfig;\r\n  };\r\n}\r\n\r\n/**\r\n * 屏幕状态\r\n */\r\nexport enum EscreenState {\r\n  /**\r\n   * 横向屏幕\r\n   */\r\n  HORIZONTAL = 'h',\r\n  /**\r\n   * 竖屏显示\r\n   */\r\n  VERTICAL = 'v',\r\n}\r\n\r\n/**\r\n * 屏幕比例适配\r\n */\r\nexport interface queryItem {\r\n  /**\r\n   * 开始宽度\r\n   */\r\n  startWidth: number;\r\n  /**\r\n   * 结束宽度\r\n   * -1表示无限大\r\n   */\r\n  endWidth: number;\r\n  /**\r\n   * 开始高度\r\n   */\r\n  startHeight: number;\r\n  /**\r\n   * 结束高度\r\n   * -1表示无限大\r\n   */\r\n  endHeight: number;\r\n}\r\n","/*!\r\n * mobileAdp.js\r\n * (c) 2015-2021 bobliao\r\n * Released under the MIT License.\r\n */\r\n\r\n/*\r\n * 移动端界面比例适配器\r\n * 廖力编写\r\n * 2021年总汇版本\r\n * 本适配器可以不依赖任何库直接运行\r\n * 建议在页面加载进来的第一时间完成适配\r\n * 免得界面渲染完成后再适配引起页面抖动\r\n */\r\nconst _mobileAdp = function(_options, _mOptions) {\r\n  var self = this;\r\n\r\n  this.defaultOptions = {\r\n    //页面字体基准是14像素\r\n    fontSize: 14,\r\n    //设计稿宽度/高度\r\n    designWidth: 1360,\r\n    designHeight: 755,\r\n    //缩放限制参数\r\n    //用于限制页面的缩放大小\r\n    scaleLimit: {\r\n      enable: false,\r\n      maxWidth: 1360,\r\n      minWidth: 800,\r\n      maxHeight: 755,\r\n      minHeight: 600,\r\n    },\r\n    //横屏回调函数\r\n    hCallBack: function() {},\r\n    //竖屏回调函数\r\n    vCallBack: function() {},\r\n    //调整模式\r\n    //auto:自动选择高度还是宽度来调整\r\n    //width:只通过宽度调整\r\n    //height:只通过高度调整\r\n    mode: 'auto',\r\n    //防抖时间\r\n    debounceTime: 500,\r\n  };\r\n\r\n  //拷贝函数\r\n  var extend = function(target, source) {\r\n    target = target || {};\r\n    for (var prop in source) {\r\n      if (typeof source[prop] === 'object') {\r\n        target[prop] = extend(target[prop], source[prop]);\r\n      } else {\r\n        target[prop] = source[prop];\r\n      }\r\n    }\r\n    return target;\r\n  };\r\n\r\n  _options = extend(this.defaultOptions, _options);\r\n\r\n  //rem相对字体大小起始大小\r\n  //单位像素\r\n  this.fontSize = _options.fontSize;\r\n  //设计稿宽度\r\n  this.designWidth = _options.designWidth;\r\n  //设计稿高度\r\n  this.designHeight = _options.designHeight;\r\n\r\n  //横屏回调函数\r\n  this.hCallBack = _options.hCallBack;\r\n\r\n  //竖屏回调函数\r\n  this.vCallBack = _options.vCallBack;\r\n\r\n  //大小限制选项\r\n  this.scaleLimit = _options.scaleLimit;\r\n\r\n  //防抖时间\r\n  this.debounceTime = _options.debounceTime;\r\n\r\n  ///调整模式\r\n  //auto:自动选择高度还是宽度来调整\r\n  //width:只通过宽度调整\r\n  //height:只通过高度调整,\r\n  this.mode = _options.mode;\r\n\r\n  //指示当前是横屏还是竖屏\r\n  this.state = '';\r\n\r\n  //初始化\r\n  this.init = function(_callback) {\r\n    //先适配viewPort\r\n    this.adaptVP({ uWidth: this.designWidth });\r\n    //然后再适配rem\r\n    this.adpRem();\r\n\r\n    if (typeof _callback !== 'undefined') {\r\n      _callback();\r\n    }\r\n  };\r\n\r\n  //重新调整\r\n  this.rebind = function(_options, _callBack) {\r\n    _options = extend(this.defaultOptions, _options);\r\n    //rem相对字体大小起始大小\r\n    //单位像素\r\n    this.fontSize = _options.fontSize;\r\n    //设计稿宽度\r\n    this.designWidth = _options.designWidth;\r\n    //设计稿高度\r\n    this.designHeight = _options.designHeight;\r\n\r\n    //横屏回调函数\r\n    this.hCallBack = _options.hCallBack;\r\n\r\n    //竖屏回调函数\r\n    this.vCallBack = _options.vCallBack;\r\n\r\n    //大小限制选项\r\n    this.scaleLimit = _options.scaleLimit;\r\n\r\n    ///调整模式\r\n    //auto:自动选择高度还是宽度来调整\r\n    //width:只通过宽度调整\r\n    //height:只通过高度调整,\r\n    this.mode = _options.mode;\r\n\r\n    //指示当前是横屏还是竖屏\r\n    this.state = '';\r\n    this.init(function() {\r\n      if (typeof _callback !== 'undefined') {\r\n        _callBack();\r\n      }\r\n    });\r\n  };\r\n\r\n  /**\r\n   * 重新初始化\r\n   */\r\n  this.reInit = function() {\r\n    var findedResoList = [];\r\n    for (var i = 0; i < _mOptions.queryList.length; i++) {\r\n      var _item = _mOptions.queryList[i];\r\n      var isCondition = false;\r\n      if (_item.mediaQuery.screenState === self.state) {\r\n        isCondition = true;\r\n      }\r\n      if (isCondition) {\r\n        findedResoList.push(_item);\r\n      }\r\n    }\r\n    if (isCondition) {\r\n      _item.mediaQuery.config;\r\n    }\r\n    var clientWidth = window.document.documentElement.clientWidth;\r\n    var windowHeight = window.document.documentElement.clientHeight;\r\n    if (findedResoList.length !== 0) {\r\n      if (findedResoList.length === 1) {\r\n        self.rebind(findedResoList[0].mediaQuery.config);\r\n      } else {\r\n        var last = null;\r\n        for (var i = 0; i < findedResoList.length; i++) {\r\n          var citem = findedResoList[i];\r\n          if (typeof citem.mediaQuery.scope !== 'undefined') {\r\n            if (\r\n              citem.mediaQuery.scope.startWidth <= clientWidth &&\r\n              getEnd(citem.mediaQuery.scope.endWidth) > clientWidth &&\r\n              citem.mediaQuery.scope.startHeight <= windowHeight &&\r\n              getEnd(citem.mediaQuery.scope.endHeight) > windowHeight\r\n            ) {\r\n              last = citem;\r\n              break;\r\n            }\r\n          } else {\r\n            last = citem;\r\n          }\r\n        }\r\n        self.rebind(last.mediaQuery.config);\r\n      }\r\n    }\r\n  };\r\n\r\n  //适配rem算法\r\n  //这个算法还保留在以前的代码里\r\n  //这个的话最早可以追溯到2016年\r\n  this.adpRem = function() {\r\n    //适配rem的算法\r\n    (function(doc, win) {\r\n      var docEl = doc.documentElement,\r\n        resizeEvt =\r\n          'orientationchange' in window ? 'orientationchange' : 'resize',\r\n        recalc = function() {\r\n          //document.body.style.display = \"none\";\r\n          var clientWidth = docEl.clientWidth;\r\n          var windowHeight = docEl.clientHeight;\r\n          //document.body.style.display = \"\";\r\n\r\n          //应用大小限制选项\r\n          if (self.scaleLimit.enable === true) {\r\n            if (clientWidth > self.scaleLimit.maxWidth) {\r\n              clientWidth = self.scaleLimit.maxWidth;\r\n            }\r\n            if (clientWidth < self.scaleLimit.minWidth) {\r\n              clientWidth = self.scaleLimit.minWidth;\r\n            }\r\n            if (windowHeight > self.scaleLimit.maxHeight) {\r\n              windowHeight = self.scaleLimit.maxHeight;\r\n            }\r\n            if (windowHeight < self.scaleLimit.minHeight) {\r\n              windowHeight = self.scaleLimit.minHeight;\r\n            }\r\n          }\r\n\r\n          if (clientWidth > windowHeight) {\r\n            if (\r\n              typeof _mOptions !== 'undefined' &&\r\n              _mOptions.hasOwnProperty('queryList')\r\n            ) {\r\n              if (self.state !== 'h' && self.state !== '') {\r\n                self.state = 'h';\r\n                self.reInit();\r\n                return;\r\n              }\r\n            }\r\n\r\n            self.state = 'h';\r\n            self.hCallBack(self);\r\n          } else {\r\n            if (\r\n              typeof _mOptions !== 'undefined' &&\r\n              _mOptions.hasOwnProperty('queryList')\r\n            ) {\r\n              if (self.state !== 'v' && self.state !== '') {\r\n                self.state = 'v';\r\n                self.reInit();\r\n                return;\r\n              }\r\n            }\r\n            self.state = 'v';\r\n            self.vCallBack(self);\r\n          }\r\n\r\n          var compTarget = null;\r\n          if (!clientWidth) return;\r\n          //原始比例\r\n          var orgPre = self.designWidth / self.designHeight;\r\n          var currPre = clientWidth / windowHeight;\r\n          var res = 0;\r\n\r\n          var adWidth = function() {\r\n            //console.log('用宽度调整字体')\r\n            compTarget = clientWidth;\r\n            //计算设计字体大小和实际字体大小的比例关系\r\n            res = self.fontSize * (compTarget / self.designWidth);\r\n          };\r\n\r\n          var adHeight = function() {\r\n            //console.log('用高度调整字体')\r\n            compTarget = windowHeight;\r\n            //计算设计字体大小和实际字体大小的比例关系\r\n            res = self.fontSize * (compTarget / self.designHeight);\r\n          };\r\n\r\n          if (self.mode === 'auto') {\r\n            if (orgPre < currPre) {\r\n              adHeight();\r\n            } else {\r\n              adWidth();\r\n            }\r\n          } else if (self.mode === 'width') {\r\n            adWidth();\r\n          } else if (self.mode === 'height') {\r\n            adHeight();\r\n          }\r\n          document.documentElement.style.fontSize = res.toFixed(1) + 'px';\r\n        };\r\n\r\n      let resizeF = function() {\r\n        self.debounceSetFontSize(recalc);\r\n      };\r\n      /*\r\n            window.onload = recalc;\r\n            */\r\n      if (!doc.addEventListener) return;\r\n      win.addEventListener(resizeEvt, resizeF, false);\r\n      doc.addEventListener('DOMContentLoaded', resizeF, false);\r\n      self.distory = function() {\r\n        clearTimeout(self.debounceTimeOut);\r\n        win.removeEventListener(resizeEvt, resizeF);\r\n        doc.removeEventListener('DOMContentLoaded', resizeF);\r\n      };\r\n      resizeF();\r\n    })(document, window);\r\n  };\r\n\r\n  this.debounceTimeOut = null;\r\n\r\n  /**\r\n   * 设置字体大小的时候进行防抖处理\r\n   *  */\r\n  this.debounceSetFontSize = function(_recalc) {\r\n    if (this.debounceTimeOut !== null) {\r\n      clearTimeout(this.debounceTimeOut);\r\n    }\r\n    if (this.debounceTime <= 0) {\r\n      _recalc();\r\n    } else {\r\n      if (this.debounceTimeOut === null) {\r\n        _recalc();\r\n      }\r\n      this.debounceTimeOut = setTimeout(function() {\r\n        _recalc();\r\n        self.debounceTimeOut = null;\r\n      }, this.debounceTime);\r\n    }\r\n  };\r\n\r\n  //适配viewPort\r\n  //这是一个相当古老的算法了\r\n  //最早可以追溯到2015年\r\n  //原版算法已经找不到了\r\n  //最后只找到了这个被压缩后的版本\r\n  this.adaptVP = function(d) {\r\n    var vpObj = document.querySelector(\"meta[name='viewport']\");\r\n    if (vpObj !== null) {\r\n      var width = '';\r\n      var arrVp = vpObj.content.split(',');\r\n      for (let i = 0; i < arrVp.length; i++) {\r\n        var item = arrVp[i].split('=');\r\n        if (item[0] === 'width') {\r\n          width = item[1];\r\n          break;\r\n        }\r\n      }\r\n\r\n      if (width === d) {\r\n        return;\r\n      }\r\n    }\r\n    function e() {\r\n      var e, i;\r\n      return (\r\n        (o.uWidth = d.uWidth ? d.uWidth : 640),\r\n        (o.dWidth = d.dWidth\r\n          ? d.dWidth\r\n          : window.screen.width || window.screen.availWidth),\r\n        (o.ratio = window.devicePixelRatio ? window.devicePixelRatio : 1),\r\n        (o.userAgent = navigator.userAgent),\r\n        (o.bConsole = d.bConsole ? d.bConsole : !1),\r\n        d.mode\r\n          ? void (o.mode = d.mode)\r\n          : ((e = o.userAgent.match(/Android/i)),\r\n            void (\r\n              e &&\r\n              ((o.mode = 'android-2.2'),\r\n              (i = o.userAgent.match(/Android\\s(\\d+.\\d+)/i)),\r\n              i && (i = parseFloat(i[1])),\r\n              2.2 == i || 2.3 == i\r\n                ? (o.mode = 'android-2.2')\r\n                : 4.4 > i\r\n                ? (o.mode = 'android-dpi')\r\n                : i >= 4.4 &&\r\n                  (o.mode =\r\n                    o.dWidth > o.uWidth ? 'android-dpi' : 'android-scale'))\r\n            ))\r\n      );\r\n    }\r\n    function getContent() {\r\n      var e,\r\n        i,\r\n        t,\r\n        a,\r\n        n = '',\r\n        r = !1;\r\n      if (o.userAgent.indexOf('Pixel') !== -1) {\r\n        o.mode = 'apple';\r\n      }\r\n      switch (o.mode) {\r\n        case 'apple':\r\n          n =\r\n            'width=' + self.designWidth + ', user-scalable=no, user-scalable=0';\r\n          break;\r\n        case 'android-2.2':\r\n          d.dWidth ||\r\n            (o.dWidth =\r\n              2 == o.ratio\r\n                ? 720\r\n                : 1.5 == o.ratio\r\n                ? 480\r\n                : 1 == o.ratio\r\n                ? 320\r\n                : 0.75 == o.ratio\r\n                ? 240\r\n                : 480),\r\n            (e = window.screen.width || window.screen.availWidth),\r\n            320 == e ? (o.dWidth = o.ratio * e) : 640 > e && (o.dWidth = e),\r\n            (o.mode = 'android-dpi'),\r\n            (r = !0);\r\n        case 'android-dpi':\r\n          (i = ((160 * o.uWidth) / o.dWidth) * o.ratio),\r\n            (n =\r\n              'target-densitydpi=' +\r\n              i +\r\n              ', width=' +\r\n              o.uWidth +\r\n              ', user-scalable=no'),\r\n            r && (o.mode = 'android-2.2');\r\n          break;\r\n        case 'android-scale':\r\n          //n = \"width=\" + o.uWidth + \", user-scalable=no\";\r\n          i = ((160 * o.uWidth) / o.dWidth) * o.ratio;\r\n          n =\r\n            'target-densitydpi=' +\r\n            i +\r\n            ', width=' +\r\n            o.uWidth +\r\n            ', user-scalable=no';\r\n      }\r\n\r\n      if (vpObj !== null) {\r\n        vpObj.content = n;\r\n      } else {\r\n        t =\r\n          document.querySelector(\"meta[name='viewport']\") ||\r\n          document.createElement('meta');\r\n        t.name = 'viewport';\r\n        t.content = n;\r\n        a = document.getElementsByTagName('head');\r\n        if (a.length > 0) {\r\n          a[0].appendChild(t);\r\n        }\r\n      }\r\n    }\r\n    function t() {\r\n      var d = '';\r\n      for (key in o) {\r\n        d += key + ': ' + o[key] + '; ';\r\n      }\r\n      //alert(d);\r\n    }\r\n    if (d) {\r\n      var o = {\r\n        uWidth: 0,\r\n        dWidth: 0,\r\n        ratio: 1,\r\n        mode: 'apple',\r\n        userAgent: null,\r\n        bConsole: !1,\r\n      };\r\n      e(), getContent(), o.bConsole && t();\r\n    }\r\n  };\r\n};\r\n\r\nexport { _mobileAdp };\r\n","/**\r\n * 本文件为分辨率适配钩子\r\n * 廖力编写 2022/03/28\r\n */\r\nimport React, { useState, useEffect } from 'react';\r\nimport { ReactElement } from 'react';\r\nimport {\r\n  Iconfig,\r\n  EresoMode,\r\n  Ireso,\r\n  IconfigMutiple,\r\n  Imq,\r\n  EscreenState,\r\n} from './iReso';\r\nimport { _mobileAdp } from './mobileAdp';\r\nimport useJquery, { isRunningInServer } from '@bobliao/use-jquery-hook';\r\nimport { Helmet } from 'react-helmet';\r\n//import requireContext from 'require-context.macro';\r\nconst codeStringify = require('code-stringify');\r\n\r\nexport type config = Iconfig | IconfigMutiple;\r\n\r\nconst useReso = function(\r\n  config: config = {\r\n    //页面字体基准是14像素\r\n    fontSize: 14,\r\n    //设计稿宽度/高度\r\n    designWidth: 1360,\r\n    designHeight: 755,\r\n    //缩放限制参数\r\n    //用于限制页面的缩放大小\r\n    scaleLimit: {\r\n      enable: false,\r\n      maxWidth: 1360,\r\n      minWidth: 800,\r\n      maxHeight: 755,\r\n      minHeight: 600,\r\n    },\r\n    //横屏回调函数\r\n    hCallBack: function() {},\r\n    //竖屏回调函数\r\n    vCallBack: function() {},\r\n    //调整模式\r\n    mode: EresoMode.AUTO,\r\n  }\r\n): Ireso {\r\n  const $ = useJquery();\r\n  const [screenState, setscreenState] = useState<EscreenState>(\r\n    EscreenState.HORIZONTAL\r\n  );\r\n  /**\r\n   * 适配\r\n   */\r\n  const makeReso = function(_config, _testState) {\r\n    //let context = requireContext(\"../nativeComs/\", false, /mobileAdp.js/);\r\n    //let modul = context(\"./mobileAdp.js\");\r\n    let ___mobileAdp = _mobileAdp;\r\n    let mobileAdp: any = new _mobileAdp(_config, config);\r\n    let helTags: ReactElement;\r\n    let injectElements: ReactElement;\r\n    let scrStr: string = '';\r\n    if (!isRunningInServer) {\r\n      //如果是运行在客户端上面就直接初始化\r\n      if (typeof window['_a_d_p_d'] !== 'undefined') {\r\n        if (typeof window['_a_d_p_d']['distory'] !== 'undefined') {\r\n          window['_a_d_p_d']['distory']();\r\n        }\r\n      }\r\n      mobileAdp.init();\r\n    } else {\r\n      var codeString = codeStringify(___mobileAdp);\r\n\r\n      scrStr =\r\n        `\r\n                            window.__m_adp__ = ` +\r\n        codeString +\r\n        `;\r\n\r\n                            var _adp_config = ` +\r\n        JSON.stringify(config) +\r\n        `;\r\n                            \r\n                            if (_adp_config.hasOwnProperty(\"queryList\")) {\r\n                                var clientWidth = window.document.documentElement.clientWidth;\r\n                                var windowHeight = window.document.documentElement.clientHeight;\r\n                                var testState = \"h\";\r\n                                if (clientWidth > windowHeight) {\r\n                                    testState = \"h\";\r\n                                } else {\r\n                                    testState = \"v\";\r\n                                }\r\n                                for (var i = 0; i < _adp_config.queryList.length; i++) {\r\n                                    var _item = _adp_config.queryList[i];\r\n                                    var _index = i;\r\n                                    var isCondition = false;\r\n                                    if (_item.mediaQuery.screenState === testState) {\r\n                                        isCondition = true;\r\n                                    }\r\n                                    if (isCondition) {\r\n\t\t\t\t\t\t\t\t\t\t_item.mediaQuery.config.debounceTime = 0;\r\n                                        window._a_d_p_d = new __m_adp__(_item.mediaQuery.config,_adp_config);\r\n                                        window._a_d_p_d.init();\r\n                                        break;\r\n                                    }\r\n                                }\r\n                            }else{\r\n\t\t\t\t\t\t\t\t_adp_config.debounceTime = 0;\r\n                                window._a_d_p_d = new __m_adp__(_adp_config);\r\n                                window._a_d_p_d.init();\r\n                            }\r\n                        `;\r\n\r\n      injectElements = <script id=\"_a_d_p_\">{scrStr}</script>;\r\n      //如果是运行在服务端上面就写入一段原生代码,让分辨率适配在网页加载的第一时间进行适配\r\n      //如果这里不进行适配,那么在网页加载的第一时间,客户端代码还没注入的时候,页面将会抽搐一下,\r\n      //等客户端代码完全运行完成后,页面分辨率才会被适配到适合的样子,加入这段代码后,页面在到达浏览器的第一时间就可以开始适配的分辨率\r\n      helTags = <Helmet>{injectElements}</Helmet>;\r\n    }\r\n    return {\r\n      data: { helTags: helTags, elemsnts: injectElements, scriptStr: scrStr },\r\n      funcs: mobileAdp,\r\n      screenState: screenState,\r\n    };\r\n  };\r\n\r\n  const getEnd = function(_ed: number): number {\r\n    if (_ed === -1) {\r\n      return 9999999999;\r\n    } else {\r\n      return _ed;\r\n    }\r\n  };\r\n\r\n  var clientWidth: number = 1920;\r\n  var windowHeight: number = 1080;\r\n  var testState: EscreenState = EscreenState.HORIZONTAL;\r\n\r\n  if (clientWidth > windowHeight) {\r\n    testState = EscreenState.HORIZONTAL;\r\n  } else {\r\n    testState = EscreenState.VERTICAL;\r\n  }\r\n\r\n  const testStateFunc = function(_isSetState: boolean) {\r\n    clientWidth = window.document.documentElement.clientWidth;\r\n    windowHeight = window.document.documentElement.clientHeight;\r\n\r\n    if (clientWidth > windowHeight) {\r\n      testState = EscreenState.HORIZONTAL;\r\n    } else {\r\n      testState = EscreenState.VERTICAL;\r\n    }\r\n\r\n    if (_isSetState === true) {\r\n      setscreenState(testState);\r\n    }\r\n  };\r\n\r\n  if (!isRunningInServer) {\r\n    const st = function() {\r\n      testStateFunc(true);\r\n    };\r\n    useEffect(function(): ReturnType<React.EffectCallback> {\r\n      $(window).resize(st);\r\n      testStateFunc(true);\r\n      return function(): void {\r\n        $(window).unbind('resize', st);\r\n      };\r\n    }, []);\r\n    testStateFunc(false);\r\n  }\r\n\r\n  /**\r\n   * 如果是多条参数适配\r\n   */\r\n  if (config.hasOwnProperty('queryList')) {\r\n    config = config as IconfigMutiple;\r\n    if (!isRunningInServer) {\r\n      if (typeof window['_a_d_p_d'] !== 'undefined') {\r\n        if (typeof window['_a_d_p_d']['distory'] !== 'undefined') {\r\n          window['_a_d_p_d']['distory']();\r\n        }\r\n      }\r\n      var result: any = null;\r\n      var findedResoList: Array<Imq> = [];\r\n      for (var i = 0; i < config.queryList.length; i++) {\r\n        var _item: Imq = config.queryList[i];\r\n        var isCondition: boolean = false;\r\n        if (_item.mediaQuery.screenState === testState) {\r\n          isCondition = true;\r\n        }\r\n        if (isCondition) {\r\n          findedResoList.push(_item);\r\n        }\r\n      }\r\n      if (findedResoList.length !== 0) {\r\n        if (findedResoList.length === 1) {\r\n          result = makeReso(findedResoList[0].mediaQuery.config, testState);\r\n        } else {\r\n          var last: Imq = null;\r\n          for (var i = 0; i < findedResoList.length; i++) {\r\n            var citem: Imq = findedResoList[i];\r\n            if (typeof citem.mediaQuery.scope !== 'undefined') {\r\n              if (\r\n                citem.mediaQuery.scope.startWidth <= clientWidth &&\r\n                getEnd(citem.mediaQuery.scope.endWidth) > clientWidth &&\r\n                citem.mediaQuery.scope.startHeight <= windowHeight &&\r\n                getEnd(citem.mediaQuery.scope.endHeight) > windowHeight\r\n              ) {\r\n                last = citem;\r\n                break;\r\n              }\r\n            } else {\r\n              last = citem;\r\n            }\r\n          }\r\n          result = makeReso(last.mediaQuery.config, testState);\r\n        }\r\n      }\r\n\r\n      return result;\r\n    } else {\r\n      return makeReso(config.queryList[0].mediaQuery.config, testState);\r\n    }\r\n  } else {\r\n    return makeReso(config, testState);\r\n  }\r\n};\r\n\r\nexport { useReso as default, _mobileAdp };\r\n","import useReso, { _mobileAdp } from './resoHook';\r\nexport type { Ireso, Iconfig, IconfigMutiple, Imq, queryItem } from './iReso';\r\n/**\r\n * 屏幕状态\r\n */\r\nexport enum EscreenState {\r\n\t/**\r\n\t * 横向屏幕\r\n\t */\r\n\tHORIZONTAL = \"h\",\r\n\t/**\r\n\t * 竖屏显示\r\n\t */\r\n\tVERTICAL = \"v\",\r\n}\r\n\r\n/**\r\n * 设置分辨率适配器的工作模式\r\n */\r\nexport enum EresoMode {\r\n\t/**\r\n\t * auto:自动选择高度还是宽度来调整\r\n\t */\r\n\tAUTO = \"auto\",\r\n\t/**\r\n\t * width:只通过宽度调整\r\n\t */\r\n\tWIDTH = \"width\",\r\n\t/**\r\n\t * height:只通过高度调整\r\n\t */\r\n\tHEIGHT = \"height\",\r\n}\r\n\r\nexport { useReso, _mobileAdp };\r\n"],"names":["EresoMode","EscreenState","_mobileAdp","_options","_mOptions","self","defaultOptions","fontSize","designWidth","designHeight","scaleLimit","enable","maxWidth","minWidth","maxHeight","minHeight","hCallBack","vCallBack","mode","debounceTime","extend","target","source","prop","state","init","_callback","adaptVP","uWidth","adpRem","rebind","_callBack","reInit","findedResoList","i","queryList","length","_item","isCondition","mediaQuery","screenState","push","clientWidth","window","document","documentElement","windowHeight","clientHeight","config","last","citem","scope","startWidth","getEnd","endWidth","startHeight","endHeight","doc","win","docEl","resizeEvt","recalc","hasOwnProperty","compTarget","orgPre","currPre","res","adWidth","adHeight","style","toFixed","resizeF","debounceSetFontSize","addEventListener","distory","clearTimeout","debounceTimeOut","removeEventListener","_recalc","setTimeout","d","vpObj","querySelector","width","arrVp","content","split","item","e","o","dWidth","screen","availWidth","ratio","devicePixelRatio","userAgent","navigator","bConsole","match","parseFloat","getContent","t","a","n","r","indexOf","createElement","name","getElementsByTagName","appendChild","key","codeStringify","require","useReso","AUTO","$","useJquery","useState","HORIZONTAL","setscreenState","makeReso","_config","_testState","___mobileAdp","mobileAdp","helTags","injectElements","scrStr","isRunningInServer","codeString","JSON","stringify","React","id","Helmet","data","elemsnts","scriptStr","funcs","_ed","testState","VERTICAL","testStateFunc","_isSetState","st","useEffect","resize","unbind","result"],"mappings":"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"}