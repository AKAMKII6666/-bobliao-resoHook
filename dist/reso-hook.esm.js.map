{"version":3,"file":"reso-hook.esm.js","sources":["../src/iReso.ts","../src/mobileAdp.js","../src/resoHook.tsx","../src/index.ts"],"sourcesContent":["import { ReactElement } from 'react';\r\n/**\r\n * useReso 钩子返回的东西\r\n */\r\nexport interface Ireso {\r\n  /**\r\n   * 数据\r\n   */\r\n  data: {\r\n    /**\r\n     * 用于服务器端渲染时,进行分辨率预计算的写入元素\r\n     */\r\n    helTags: ReactElement;\r\n    /**\r\n     * 剥离了Helmet的版本\r\n     */\r\n    elemsnts: ReactElement;\r\n  };\r\n  /**\r\n   * 返回初始化好的mobileAdp对象\r\n   */\r\n  funcs: any;\r\n  /**\r\n   * 屏幕状态\r\n   */\r\n  screenState: EscreenState;\r\n}\r\n\r\n/**\r\n * 设置分辨率适配器的工作模式\r\n */\r\nexport enum EresoMode {\r\n  /**\r\n   * auto:自动选择高度还是宽度来调整\r\n   */\r\n  AUTO = 'auto',\r\n  /**\r\n   * width:只通过宽度调整\r\n   */\r\n  WIDTH = 'width',\r\n  /**\r\n   * height:只通过高度调整\r\n   */\r\n  HEIGHT = 'height',\r\n}\r\n\r\n/**\r\n * 用于分辨率适配器的参数\r\n */\r\nexport interface Iconfig {\r\n  /**\r\n   * 页面字体基准\r\n   */\r\n  fontSize: number;\r\n  /**\r\n   * 设计稿的宽度\r\n   */\r\n  designWidth: number;\r\n  /**\r\n   * 设计稿的高度\r\n   */\r\n  designHeight: number;\r\n  /**\r\n   * 缩放限制参数\r\n   * 用于限制页面的缩放大小\r\n   */\r\n  scaleLimit?: {\r\n    /**\r\n     * 是否打开缩放限制\r\n     */\r\n    enable: boolean;\r\n    /**\r\n     * 最大的宽度限制\r\n     */\r\n    maxWidth?: number;\r\n    /**\r\n     * 最小的宽度限制\r\n     */\r\n    minWidth?: number;\r\n    /**\r\n     * 最大的高度\r\n     */\r\n    maxHeight?: number;\r\n    /**\r\n     * 最小的高度\r\n     */\r\n    minHeight?: number;\r\n  };\r\n  /**\r\n   * 横屏回调函数\r\n   */\r\n  hCallBack?: Function;\r\n  /**\r\n   * 竖屏回调函数\r\n   */\r\n  vCallBack?: Function;\r\n  /**\r\n   * 调整模式\r\n   */\r\n  mode?: EresoMode;\r\n}\r\n\r\n/**\r\n * 用于分辨率适配器的参数\r\n * 多参数适配\r\n */\r\nexport interface IconfigMutiple {\r\n  /**\r\n   * 查询条件\r\n   */\r\n  queryList: Array<Imq>;\r\n}\r\n\r\nexport interface Imq {\r\n  /**\r\n   * 查询当前窗体的宽度例如\r\n   * '(min-width: 1824px)'\r\n   * '(max-width: 1224px)'\r\n   * 符合条件的就使用config来进行适配\r\n   */\r\n  mediaQuery: {\r\n    /**\r\n     * 查询条件\r\n     */\r\n    screenState: EscreenState;\r\n    /**\r\n     * 范围控制\r\n     */\r\n    scope?: queryItem;\r\n    /**\r\n     * 适配参数\r\n     */\r\n    config: Iconfig;\r\n  };\r\n}\r\n\r\n/**\r\n * 屏幕状态\r\n */\r\nexport enum EscreenState {\r\n  /**\r\n   * 横向屏幕\r\n   */\r\n  HORIZONTAL = 'h',\r\n  /**\r\n   * 竖屏显示\r\n   */\r\n  VERTICAL = 'v',\r\n}\r\n\r\n/**\r\n * 屏幕比例适配\r\n */\r\nexport interface queryItem {\r\n  /**\r\n   * 开始宽度\r\n   */\r\n  startWidth: number;\r\n  /**\r\n   * 结束宽度\r\n   * -1表示无限大\r\n   */\r\n  endWidth: number;\r\n  /**\r\n   * 开始高度\r\n   */\r\n  startHeight: number;\r\n  /**\r\n   * 结束高度\r\n   * -1表示无限大\r\n   */\r\n  endHeight: number;\r\n}\r\n","/*!\r\n * mobileAdp.js\r\n * (c) 2015-2021 bobliao\r\n * Released under the MIT License.\r\n */\r\n\r\n/*\r\n * 移动端界面比例适配器\r\n * 廖力编写\r\n * 2021年总汇版本\r\n * 本适配器可以不依赖任何库直接运行\r\n * 建议在页面加载进来的第一时间完成适配\r\n * 免得界面渲染完成后再适配引起页面抖动\r\n */\r\nconst _mobileAdp = function (_options, _mOptions) {\r\n\tvar self = this;\r\n\r\n\tthis.defaultOptions = {\r\n\t\t//页面字体基准是14像素\r\n\t\tfontSize: 14,\r\n\t\t//设计稿宽度/高度\r\n\t\tdesignWidth: 1360,\r\n\t\tdesignHeight: 755,\r\n\t\t//缩放限制参数\r\n\t\t//用于限制页面的缩放大小\r\n\t\tscaleLimit: {\r\n\t\t\tenable: false,\r\n\t\t\tmaxWidth: 1360,\r\n\t\t\tminWidth: 800,\r\n\t\t\tmaxHeight: 755,\r\n\t\t\tminHeight: 600,\r\n\t\t},\r\n\t\t//横屏回调函数\r\n\t\thCallBack: function () {},\r\n\t\t//竖屏回调函数\r\n\t\tvCallBack: function () {},\r\n\t\t//调整模式\r\n\t\t//auto:自动选择高度还是宽度来调整\r\n\t\t//width:只通过宽度调整\r\n\t\t//height:只通过高度调整\r\n\t\tmode: \"auto\",\r\n\t};\r\n\r\n\t//拷贝函数\r\n\tvar extend = function (target, source) {\r\n\t\ttarget = target || {};\r\n\t\tfor (var prop in source) {\r\n\t\t\tif (typeof source[prop] === \"object\") {\r\n\t\t\t\ttarget[prop] = extend(target[prop], source[prop]);\r\n\t\t\t} else {\r\n\t\t\t\ttarget[prop] = source[prop];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn target;\r\n\t};\r\n\r\n\t_options = extend(this.defaultOptions, _options);\r\n\r\n\t//rem相对字体大小起始大小\r\n\t//单位像素\r\n\tthis.fontSize = _options.fontSize;\r\n\t//设计稿宽度\r\n\tthis.designWidth = _options.designWidth;\r\n\t//设计稿高度\r\n\tthis.designHeight = _options.designHeight;\r\n\r\n\t//横屏回调函数\r\n\tthis.hCallBack = _options.hCallBack;\r\n\r\n\t//竖屏回调函数\r\n\tthis.vCallBack = _options.vCallBack;\r\n\r\n\t//大小限制选项\r\n\tthis.scaleLimit = _options.scaleLimit;\r\n\r\n\t///调整模式\r\n\t//auto:自动选择高度还是宽度来调整\r\n\t//width:只通过宽度调整\r\n\t//height:只通过高度调整,\r\n\tthis.mode = _options.mode;\r\n\r\n\t//指示当前是横屏还是竖屏\r\n\tthis.state = \"\";\r\n\r\n\t//初始化\r\n\tthis.init = function (_callback) {\r\n\t\t//先适配viewPort\r\n\t\tthis.adaptVP({ uWidth: this.designWidth });\r\n\t\t//然后再适配rem\r\n\t\tthis.adpRem();\r\n\r\n\t\tif (typeof _callback !== \"undefined\") {\r\n\t\t\t_callback();\r\n\t\t}\r\n\t};\r\n\r\n\t//重新调整\r\n\tthis.rebind = function (_options, _callBack) {\r\n\t\t_options = extend(this.defaultOptions, _options);\r\n\t\t//rem相对字体大小起始大小\r\n\t\t//单位像素\r\n\t\tthis.fontSize = _options.fontSize;\r\n\t\t//设计稿宽度\r\n\t\tthis.designWidth = _options.designWidth;\r\n\t\t//设计稿高度\r\n\t\tthis.designHeight = _options.designHeight;\r\n\r\n\t\t//横屏回调函数\r\n\t\tthis.hCallBack = _options.hCallBack;\r\n\r\n\t\t//竖屏回调函数\r\n\t\tthis.vCallBack = _options.vCallBack;\r\n\r\n\t\t//大小限制选项\r\n\t\tthis.scaleLimit = _options.scaleLimit;\r\n\r\n\t\t///调整模式\r\n\t\t//auto:自动选择高度还是宽度来调整\r\n\t\t//width:只通过宽度调整\r\n\t\t//height:只通过高度调整,\r\n\t\tthis.mode = _options.mode;\r\n\r\n\t\t//指示当前是横屏还是竖屏\r\n\t\tthis.state = \"\";\r\n\t\tthis.init(function () {\r\n\t\t\tif (typeof _callback !== \"undefined\") {\r\n\t\t\t\t_callBack();\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\t/**\r\n\t * 重新初始化\r\n\t */\r\n\tthis.reInit = function () {\r\n\t\tvar findedResoList = [];\r\n\t\tfor (var i = 0; i < _mOptions.queryList.length; i++) {\r\n\t\t\tvar _item = _mOptions.queryList[i];\r\n\t\t\tvar isCondition = false;\r\n\t\t\tif (_item.mediaQuery.screenState === self.state) {\r\n\t\t\t\tisCondition = true;\r\n\t\t\t}\r\n\t\t\tif (isCondition) {\r\n\t\t\t\tfindedResoList.push(_item);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (isCondition) {\r\n\t\t\t_item.mediaQuery.config;\r\n\t\t}\r\n\t\tvar clientWidth = window.document.documentElement.clientWidth;\r\n\t\tvar windowHeight = window.document.documentElement.clientHeight;\r\n\t\tif (findedResoList.length !== 0) {\r\n\t\t\tif (findedResoList.length === 1) {\r\n\t\t\t\tself.rebind(findedResoList[0].mediaQuery.config);\r\n\t\t\t} else {\r\n\t\t\t\tvar last = null;\r\n\t\t\t\tfor (var i = 0; i < findedResoList.length; i++) {\r\n\t\t\t\t\tvar citem = findedResoList[i];\r\n\t\t\t\t\tif (typeof citem.mediaQuery.scope !== \"undefined\") {\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tcitem.mediaQuery.scope.startWidth <= clientWidth &&\r\n\t\t\t\t\t\t\tgetEnd(citem.mediaQuery.scope.endWidth) > clientWidth &&\r\n\t\t\t\t\t\t\tcitem.mediaQuery.scope.startHeight <= windowHeight &&\r\n\t\t\t\t\t\t\tgetEnd(citem.mediaQuery.scope.endHeight) > windowHeight\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\tlast = citem;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tlast = citem;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tself.rebind(last.mediaQuery.config);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t//适配rem算法\r\n\t//这个算法还保留在以前的代码里\r\n\t//这个的话最早可以追溯到2016年\r\n\tthis.adpRem = function () {\r\n\t\t//适配rem的算法\r\n\t\t(function (doc, win) {\r\n\t\t\tvar docEl = doc.documentElement,\r\n\t\t\t\tresizeEvt = \"orientationchange\" in window ? \"orientationchange\" : \"resize\",\r\n\t\t\t\trecalc = function () {\r\n\t\t\t\t\t//document.body.style.display = \"none\";\r\n\t\t\t\t\tvar clientWidth = docEl.clientWidth;\r\n\t\t\t\t\tvar windowHeight = docEl.clientHeight;\r\n\t\t\t\t\t//document.body.style.display = \"\";\r\n\r\n\t\t\t\t\t//应用大小限制选项\r\n\t\t\t\t\tif (self.scaleLimit.enable === true) {\r\n\t\t\t\t\t\tif (clientWidth > self.scaleLimit.maxWidth) {\r\n\t\t\t\t\t\t\tclientWidth = self.scaleLimit.maxWidth;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (clientWidth < self.scaleLimit.minWidth) {\r\n\t\t\t\t\t\t\tclientWidth = self.scaleLimit.minWidth;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (windowHeight > self.scaleLimit.maxHeight) {\r\n\t\t\t\t\t\t\twindowHeight = self.scaleLimit.maxHeight;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (windowHeight < self.scaleLimit.minHeight) {\r\n\t\t\t\t\t\t\twindowHeight = self.scaleLimit.minHeight;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (clientWidth > windowHeight) {\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\ttypeof _mOptions !== \"undefined\" &&\r\n\t\t\t\t\t\t\t_mOptions.hasOwnProperty(\"queryList\")\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\tif (self.state !== \"h\" && self.state !== \"\") {\r\n\t\t\t\t\t\t\t\tself.state = \"h\";\r\n\t\t\t\t\t\t\t\tself.reInit();\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tself.state = \"h\";\r\n\t\t\t\t\t\tself.hCallBack(self);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\ttypeof _mOptions !== \"undefined\" &&\r\n\t\t\t\t\t\t\t_mOptions.hasOwnProperty(\"queryList\")\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\tif (self.state !== \"v\" && self.state !== \"\") {\r\n\t\t\t\t\t\t\t\tself.state = \"v\";\r\n\t\t\t\t\t\t\t\tself.reInit();\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tself.state = \"v\";\r\n\t\t\t\t\t\tself.vCallBack(self);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar compTarget = null;\r\n\t\t\t\t\tif (!clientWidth) return;\r\n\t\t\t\t\t//原始比例\r\n\t\t\t\t\tvar orgPre = self.designWidth / self.designHeight;\r\n\t\t\t\t\tvar currPre = clientWidth / windowHeight;\r\n\t\t\t\t\tvar res = 0;\r\n\r\n\t\t\t\t\tvar adWidth = function () {\r\n\t\t\t\t\t\t//console.log('用宽度调整字体')\r\n\t\t\t\t\t\tcompTarget = clientWidth;\r\n\t\t\t\t\t\t//计算设计字体大小和实际字体大小的比例关系\r\n\t\t\t\t\t\tres = self.fontSize * (compTarget / self.designWidth);\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tvar adHeight = function () {\r\n\t\t\t\t\t\t//console.log('用高度调整字体')\r\n\t\t\t\t\t\tcompTarget = windowHeight;\r\n\t\t\t\t\t\t//计算设计字体大小和实际字体大小的比例关系\r\n\t\t\t\t\t\tres = self.fontSize * (compTarget / self.designHeight);\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tif (self.mode === \"auto\") {\r\n\t\t\t\t\t\tif (orgPre < currPre) {\r\n\t\t\t\t\t\t\tadHeight();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tadWidth();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (self.mode === \"width\") {\r\n\t\t\t\t\t\tadWidth();\r\n\t\t\t\t\t} else if (self.mode === \"height\") {\r\n\t\t\t\t\t\tadHeight();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdocEl.style.fontSize = res + \"px\";\r\n\t\t\t\t};\r\n\t\t\t/*\r\n            window.onload = recalc;\r\n            */\r\n\t\t\tif (!doc.addEventListener) return;\r\n\t\t\twin.addEventListener(resizeEvt, recalc, false);\r\n\t\t\tdoc.addEventListener(\"DOMContentLoaded\", recalc, false);\r\n\t\t\tself.distory = function () {\r\n\t\t\t\twin.removeEventListener(resizeEvt, recalc);\r\n\t\t\t\tdoc.removeEventListener(\"DOMContentLoaded\", recalc);\r\n\t\t\t};\r\n\t\t\trecalc();\r\n\t\t})(document, window);\r\n\t};\r\n\r\n\t//适配viewPort\r\n\t//这是一个相当古老的算法了\r\n\t//最早可以追溯到2015年\r\n\t//原版算法已经找不到了\r\n\t//最后只找到了这个被压缩后的版本\r\n\tthis.adaptVP = function (d) {\r\n\t\tfunction e() {\r\n\t\t\tvar e, i;\r\n\t\t\treturn (\r\n\t\t\t\t(o.uWidth = d.uWidth ? d.uWidth : 640),\r\n\t\t\t\t(o.dWidth = d.dWidth ? d.dWidth : window.screen.width || window.screen.availWidth),\r\n\t\t\t\t(o.ratio = window.devicePixelRatio ? window.devicePixelRatio : 1),\r\n\t\t\t\t(o.userAgent = navigator.userAgent),\r\n\t\t\t\t(o.bConsole = d.bConsole ? d.bConsole : !1),\r\n\t\t\t\td.mode\r\n\t\t\t\t\t? void (o.mode = d.mode)\r\n\t\t\t\t\t: ((e = o.userAgent.match(/Android/i)),\r\n\t\t\t\t\t  void (\r\n\t\t\t\t\t\t\te &&\r\n\t\t\t\t\t\t\t((o.mode = \"android-2.2\"),\r\n\t\t\t\t\t\t\t(i = o.userAgent.match(/Android\\s(\\d+.\\d+)/i)),\r\n\t\t\t\t\t\t\ti && (i = parseFloat(i[1])),\r\n\t\t\t\t\t\t\t2.2 == i || 2.3 == i\r\n\t\t\t\t\t\t\t\t? (o.mode = \"android-2.2\")\r\n\t\t\t\t\t\t\t\t: 4.4 > i\r\n\t\t\t\t\t\t\t\t? (o.mode = \"android-dpi\")\r\n\t\t\t\t\t\t\t\t: i >= 4.4 &&\r\n\t\t\t\t\t\t\t\t  (o.mode =\r\n\t\t\t\t\t\t\t\t\t\to.dWidth > o.uWidth\r\n\t\t\t\t\t\t\t\t\t\t\t? \"android-dpi\"\r\n\t\t\t\t\t\t\t\t\t\t\t: \"android-scale\"))\r\n\t\t\t\t\t  ))\r\n\t\t\t);\r\n\t\t}\r\n\t\tfunction i() {\r\n\t\t\tvar e,\r\n\t\t\t\ti,\r\n\t\t\t\tt,\r\n\t\t\t\ta,\r\n\t\t\t\tn = \"\",\r\n\t\t\t\tr = !1;\r\n\t\t\tif (o.userAgent.indexOf(\"Pixel\") !== -1) {\r\n\t\t\t\to.mode = \"apple\";\r\n\t\t\t}\r\n\t\t\tswitch (o.mode) {\r\n\t\t\t\tcase \"apple\":\r\n\t\t\t\t\tn = \"width=\" + self.designWidth + \", user-scalable=no, user-scalable=0\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"android-2.2\":\r\n\t\t\t\t\td.dWidth ||\r\n\t\t\t\t\t\t(o.dWidth =\r\n\t\t\t\t\t\t\t2 == o.ratio\r\n\t\t\t\t\t\t\t\t? 720\r\n\t\t\t\t\t\t\t\t: 1.5 == o.ratio\r\n\t\t\t\t\t\t\t\t? 480\r\n\t\t\t\t\t\t\t\t: 1 == o.ratio\r\n\t\t\t\t\t\t\t\t? 320\r\n\t\t\t\t\t\t\t\t: 0.75 == o.ratio\r\n\t\t\t\t\t\t\t\t? 240\r\n\t\t\t\t\t\t\t\t: 480),\r\n\t\t\t\t\t\t(e = window.screen.width || window.screen.availWidth),\r\n\t\t\t\t\t\t320 == e ? (o.dWidth = o.ratio * e) : 640 > e && (o.dWidth = e),\r\n\t\t\t\t\t\t(o.mode = \"android-dpi\"),\r\n\t\t\t\t\t\t(r = !0);\r\n\t\t\t\tcase \"android-dpi\":\r\n\t\t\t\t\t(i = ((160 * o.uWidth) / o.dWidth) * o.ratio),\r\n\t\t\t\t\t\t(n =\r\n\t\t\t\t\t\t\t\"target-densitydpi=\" +\r\n\t\t\t\t\t\t\ti +\r\n\t\t\t\t\t\t\t\", width=\" +\r\n\t\t\t\t\t\t\to.uWidth +\r\n\t\t\t\t\t\t\t\", user-scalable=no\"),\r\n\t\t\t\t\t\tr && (o.mode = \"android-2.2\");\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"android-scale\":\r\n\t\t\t\t\t//n = \"width=\" + o.uWidth + \", user-scalable=no\";\r\n\t\t\t\t\ti = ((160 * o.uWidth) / o.dWidth) * o.ratio;\r\n\t\t\t\t\tn = \"target-densitydpi=\" + i + \", width=\" + o.uWidth + \", user-scalable=no\";\r\n\t\t\t}\r\n\t\t\tt = document.querySelector(\"meta[name='viewport']\") || document.createElement(\"meta\");\r\n\t\t\tt.name = \"viewport\";\r\n\t\t\tt.content = n;\r\n\t\t\ta = document.getElementsByTagName(\"head\");\r\n\t\t\tif (a.length > 0) {\r\n\t\t\t\ta[0].appendChild(t);\r\n\t\t\t}\r\n\t\t}\r\n\t\tfunction t() {\r\n\t\t\tvar d = \"\";\r\n\t\t\tfor (key in o) {\r\n\t\t\t\td += key + \": \" + o[key] + \"; \";\r\n\t\t\t}\r\n\t\t\t//alert(d);\r\n\t\t}\r\n\t\tif (d) {\r\n\t\t\tvar o = {\r\n\t\t\t\tuWidth: 0,\r\n\t\t\t\tdWidth: 0,\r\n\t\t\t\tratio: 1,\r\n\t\t\t\tmode: \"apple\",\r\n\t\t\t\tuserAgent: null,\r\n\t\t\t\tbConsole: !1,\r\n\t\t\t};\r\n\t\t\te(), i(), o.bConsole && t();\r\n\t\t}\r\n\t};\r\n};\r\n\r\nexport { _mobileAdp };\r\n","/**\r\n * 本文件为分辨率适配钩子\r\n * 廖力编写 2022/03/28\r\n */\r\nimport React, { useState, useEffect } from 'react';\r\nimport { ReactElement } from 'react';\r\nimport {\r\n  Iconfig,\r\n  EresoMode,\r\n  Ireso,\r\n  IconfigMutiple,\r\n  Imq,\r\n  EscreenState,\r\n} from './iReso';\r\nimport { _mobileAdp } from './mobileAdp';\r\nimport useJquery, { isRunningInServer } from '@bobliao/use-jquery-hook';\r\nimport { Helmet } from 'react-helmet';\r\n//import requireContext from 'require-context.macro';\r\nconst codeStringify = require('code-stringify');\r\n\r\nexport type config = Iconfig | IconfigMutiple;\r\n\r\nconst useReso = function(\r\n  config: config = {\r\n    //页面字体基准是14像素\r\n    fontSize: 14,\r\n    //设计稿宽度/高度\r\n    designWidth: 1360,\r\n    designHeight: 755,\r\n    //缩放限制参数\r\n    //用于限制页面的缩放大小\r\n    scaleLimit: {\r\n      enable: false,\r\n      maxWidth: 1360,\r\n      minWidth: 800,\r\n      maxHeight: 755,\r\n      minHeight: 600,\r\n    },\r\n    //横屏回调函数\r\n    hCallBack: function() {},\r\n    //竖屏回调函数\r\n    vCallBack: function() {},\r\n    //调整模式\r\n    mode: EresoMode.AUTO,\r\n  }\r\n): Ireso {\r\n  const $ = useJquery();\r\n  const [screenState, setscreenState] = useState<EscreenState>(\r\n    EscreenState.HORIZONTAL\r\n  );\r\n  /**\r\n   * 适配\r\n   */\r\n  const makeReso = function(_config, _testState) {\r\n    //let context = requireContext(\"../nativeComs/\", false, /mobileAdp.js/);\r\n    //let modul = context(\"./mobileAdp.js\");\r\n    let ___mobileAdp = _mobileAdp;\r\n    let mobileAdp: any = new _mobileAdp(_config, config);\r\n    let helTags: ReactElement;\r\n    let injectElements: ReactElement;\r\n    if (!isRunningInServer) {\r\n      //如果是运行在客户端上面就直接初始化\r\n      if (typeof window['_a_d_p_d'] !== 'undefined') {\r\n        $('[name=viewport]').remove();\r\n        if (typeof window['_a_d_p_d']['distory'] !== 'undefined') {\r\n          window['_a_d_p_d']['distory']();\r\n        }\r\n      }\r\n      mobileAdp.init();\r\n    } else {\r\n      var codeString = codeStringify(___mobileAdp);\r\n\r\n      injectElements = (\r\n        <script id=\"_a_d_p_\">\r\n          {`\r\n                            window.__m_adp__ = ` +\r\n            codeString +\r\n            `;\r\n\r\n                            var _adp_config = ` +\r\n            JSON.stringify(config) +\r\n            `;\r\n                            \r\n                            if (_adp_config.hasOwnProperty(\"queryList\")) {\r\n                                var clientWidth = window.document.documentElement.clientWidth;\r\n                                var windowHeight = window.document.documentElement.clientHeight;\r\n                                var testState = \"h\";\r\n                                if (clientWidth > windowHeight) {\r\n                                    testState = \"h\";\r\n                                } else {\r\n                                    testState = \"v\";\r\n                                }\r\n                                for (var i = 0; i < _adp_config.queryList.length; i++) {\r\n                                    var _item = _adp_config.queryList[i];\r\n                                    var _index = i;\r\n                                    var isCondition = false;\r\n                                    if (_item.mediaQuery.screenState === testState) {\r\n                                        isCondition = true;\r\n                                    }\r\n                                    if (isCondition) {\r\n                                        window._a_d_p_d = new __m_adp__(_item.mediaQuery.config,_adp_config);\r\n                                        window._a_d_p_d.init();\r\n                                        break;\r\n                                    }\r\n                                }\r\n                            }else{\r\n                                window._a_d_p_d = new __m_adp__(_adp_config);\r\n                                window._a_d_p_d.init();\r\n                            }\r\n                        `}\r\n        </script>\r\n      );\r\n      //如果是运行在服务端上面就写入一段原生代码,让分辨率适配在网页加载的第一时间进行适配\r\n      //如果这里不进行适配,那么在网页加载的第一时间,客户端代码还没注入的时候,页面将会抽搐一下,\r\n      //等客户端代码完全运行完成后,页面分辨率才会被适配到适合的样子,加入这段代码后,页面在到达浏览器的第一时间就可以开始适配的分辨率\r\n      helTags = <Helmet>{injectElements}</Helmet>;\r\n    }\r\n    return {\r\n      data: { helTags: helTags, elemsnts: injectElements },\r\n      funcs: mobileAdp,\r\n      screenState: screenState,\r\n    };\r\n  };\r\n\r\n  const getEnd = function(_ed: number): number {\r\n    if (_ed === -1) {\r\n      return 9999999999;\r\n    } else {\r\n      return _ed;\r\n    }\r\n  };\r\n\r\n  var clientWidth: number = 1920;\r\n  var windowHeight: number = 1080;\r\n  var testState: EscreenState = EscreenState.HORIZONTAL;\r\n\r\n  if (clientWidth > windowHeight) {\r\n    testState = EscreenState.HORIZONTAL;\r\n  } else {\r\n    testState = EscreenState.VERTICAL;\r\n  }\r\n\r\n  const testStateFunc = function(_isSetState) {\r\n    clientWidth = window.document.documentElement.clientWidth;\r\n    windowHeight = window.document.documentElement.clientHeight;\r\n\r\n    if (clientWidth > windowHeight) {\r\n      testState = EscreenState.HORIZONTAL;\r\n    } else {\r\n      testState = EscreenState.VERTICAL;\r\n    }\r\n\r\n    if (typeof _isSetState === 'undefined') {\r\n      setscreenState(testState);\r\n    }\r\n  };\r\n\r\n  if (!isRunningInServer) {\r\n    useEffect(function(): ReturnType<React.EffectCallback> {\r\n      $(window).resize(testStateFunc);\r\n      testStateFunc(undefined);\r\n      return function(): void {\r\n        $(window).unbind('resize', testStateFunc);\r\n      };\r\n    }, []);\r\n    testStateFunc(false);\r\n  }\r\n\r\n  /**\r\n   * 如果是多条参数适配\r\n   */\r\n  if (config.hasOwnProperty('queryList')) {\r\n    config = config as IconfigMutiple;\r\n    if (!isRunningInServer) {\r\n      if (typeof window['_a_d_p_d'] !== 'undefined') {\r\n        $('[name=viewport]').remove();\r\n        if (typeof window['_a_d_p_d']['distory'] !== 'undefined') {\r\n          window['_a_d_p_d']['distory']();\r\n        }\r\n      }\r\n      var result: any = null;\r\n      var findedResoList: Array<Imq> = [];\r\n      for (var i = 0; i < config.queryList.length; i++) {\r\n        var _item: Imq = config.queryList[i];\r\n        var isCondition: boolean = false;\r\n        if (_item.mediaQuery.screenState === testState) {\r\n          isCondition = true;\r\n        }\r\n        if (isCondition) {\r\n          findedResoList.push(_item);\r\n        }\r\n      }\r\n      if (findedResoList.length !== 0) {\r\n        if (findedResoList.length === 1) {\r\n          result = makeReso(findedResoList[0].mediaQuery.config, testState);\r\n        } else {\r\n          var last: Imq = null;\r\n          for (var i = 0; i < findedResoList.length; i++) {\r\n            var citem: Imq = findedResoList[i];\r\n            if (typeof citem.mediaQuery.scope !== 'undefined') {\r\n              if (\r\n                citem.mediaQuery.scope.startWidth <= clientWidth &&\r\n                getEnd(citem.mediaQuery.scope.endWidth) > clientWidth &&\r\n                citem.mediaQuery.scope.startHeight <= windowHeight &&\r\n                getEnd(citem.mediaQuery.scope.endHeight) > windowHeight\r\n              ) {\r\n                last = citem;\r\n                break;\r\n              }\r\n            } else {\r\n              last = citem;\r\n            }\r\n          }\r\n          result = makeReso(last.mediaQuery.config, testState);\r\n        }\r\n      }\r\n\r\n      return result;\r\n    } else {\r\n      return makeReso(config.queryList[0].mediaQuery.config, testState);\r\n    }\r\n  } else {\r\n    return makeReso(config, testState);\r\n  }\r\n};\r\n\r\nexport { useReso as default, _mobileAdp };\r\n","import useReso, { _mobileAdp } from './resoHook';\r\nexport type { Ireso, Iconfig, IconfigMutiple, Imq, queryItem } from './iReso';\r\n/**\r\n * 屏幕状态\r\n */\r\nexport enum EscreenState {\r\n\t/**\r\n\t * 横向屏幕\r\n\t */\r\n\tHORIZONTAL = \"h\",\r\n\t/**\r\n\t * 竖屏显示\r\n\t */\r\n\tVERTICAL = \"v\",\r\n}\r\n\r\n/**\r\n * 设置分辨率适配器的工作模式\r\n */\r\nexport enum EresoMode {\r\n\t/**\r\n\t * auto:自动选择高度还是宽度来调整\r\n\t */\r\n\tAUTO = \"auto\",\r\n\t/**\r\n\t * width:只通过宽度调整\r\n\t */\r\n\tWIDTH = \"width\",\r\n\t/**\r\n\t * height:只通过高度调整\r\n\t */\r\n\tHEIGHT = \"height\",\r\n}\r\n\r\nexport { useReso, _mobileAdp };\r\n"],"names":["EresoMode","EscreenState","_mobileAdp","_options","_mOptions","self","defaultOptions","fontSize","designWidth","designHeight","scaleLimit","enable","maxWidth","minWidth","maxHeight","minHeight","hCallBack","vCallBack","mode","extend","target","source","prop","state","init","_callback","adaptVP","uWidth","adpRem","rebind","_callBack","reInit","findedResoList","i","queryList","length","_item","isCondition","mediaQuery","screenState","push","clientWidth","window","document","documentElement","windowHeight","clientHeight","config","last","citem","scope","startWidth","getEnd","endWidth","startHeight","endHeight","doc","win","docEl","resizeEvt","recalc","hasOwnProperty","compTarget","orgPre","currPre","res","adWidth","adHeight","style","addEventListener","distory","removeEventListener","d","e","o","dWidth","screen","width","availWidth","ratio","devicePixelRatio","userAgent","navigator","bConsole","match","parseFloat","t","a","n","r","indexOf","querySelector","createElement","name","content","getElementsByTagName","appendChild","key","codeStringify","require","useReso","AUTO","$","useJquery","useState","HORIZONTAL","setscreenState","makeReso","_config","_testState","___mobileAdp","mobileAdp","helTags","injectElements","isRunningInServer","remove","codeString","React","id","JSON","stringify","Helmet","data","elemsnts","funcs","_ed","testState","VERTICAL","testStateFunc","_isSetState","useEffect","resize","undefined","unbind","result"],"mappings":"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"}